<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>日本語自然改行ツール</title>
  <script src="https://cdn.jsdelivr.net/gh/takuyaa/tiny-segmenter/tiny_segmenter.js"></script>
  <style>
    textarea { width: 100%; height: 120px; margin: 10px 0; }
    button { padding: 8px 16px; }
  </style>
</head>
<body>

<script>
class TinySegmenter {
  segment(input) {
    return input.split(''); // テスト用ダミー（あとで本物に差し替え）
  }
}
</script>
  
  <h3>最大文字数を指定してください</h3>
  <input type="number" id="maxLength" value="25" min="5" max="100">
  
  <h3>元のテキスト</h3>
  <textarea id="inputText" placeholder="ここにテキストを入力してください..."></textarea>
  
  <button onclick="processText()">整形する</button>
  
  <h3>整形後のテキスト</h3>
  <textarea id="outputText" readonly></textarea>
  <button onclick="copyOutput()">コピー</button>

  <script>
    function processText() {
      const input = document.getElementById('inputText').value;
      const maxLen = parseInt(document.getElementById('maxLength').value, 10);
      const segmenter = new TinySegmenter();
      const words = segmenter.segment(input);

      let result = '';
      let line = '';

      for (const word of words) {
        if ((line + word).length > maxLen) {
          result += line.trim() + '\n';
          line = word;
        } else {
          line += word;
        }
      }
      result += line.trim(); // 残りを追加

      document.getElementById('outputText').value = result;
    }

    function copyOutput() {
      const output = document.getElementById('outputText');
      output.select();
      document.execCommand('copy');
      alert('コピーしました');
    }
  </script>

</body>
</html>
